appId: com.saberloop.app
---
# Test 10: Quiz Sharing - Share Button Visible on History Page
# Corresponds to E2E test: "should show share button on quiz items in history page"

# Launch and navigate to home
- launchApp
- runFlow:
    file: _shared/navigate-home.yaml

# First complete a quiz to have something in history
- tapOn:
    text: ".*Solar System.*|.*Basic Math.*|.*Famous Scientists.*"

- extendedWaitUntil:
    visible: "Question.*of.*"
    timeout: 10000

- tapOn:
    text: "A\\).*"
- tapOn:
    text: ".*Submit.*|.*Next.*"

- tapOn:
    text: "A\\).*"
    optional: true
- tapOn:
    text: ".*Submit.*|.*Next.*"
    optional: true

- tapOn:
    text: "A\\).*"
    optional: true
- tapOn:
    text: ".*Submit.*|.*Next.*"
    optional: true

- tapOn:
    text: "A\\).*"
    optional: true
- tapOn:
    text: ".*Submit.*|.*Next.*"
    optional: true

- tapOn:
    text: "A\\).*"
    optional: true
- tapOn:
    text: ".*Submit.*|.*Next.*"
    optional: true

- extendedWaitUntil:
    visible: ".*Results.*|.*Score.*|.*%.*"
    timeout: 10000

# Navigate to Topics/History page via bottom nav
- tapOn:
    text: "Topics"

# Wait for history page to load
- extendedWaitUntil:
    visible: ".*Quiz History.*|.*Topics.*|.*quizzes.*"
    timeout: 5000

- takeScreenshot: 10-history-page

# Verify share button exists (send icon) - main assertion
# Note: On Android TWA, the share button has aria-label "Share quiz"
- assertVisible:
    text: ".*Share quiz.*"
    optional: true

- takeScreenshot: 10-share-button-visible
