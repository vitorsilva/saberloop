appId: com.saberloop.app
---
# Test 09: Ads in Loading View
# Verifies the loading view displays correctly during quiz generation
# Uses sample quizzes (no API key needed) to test loading view structure
# Note: Actual ad content is loaded by AdSense, we verify the UI structure

# Launch and navigate to home
- launchApp
- runFlow:
    file: _shared/navigate-home.yaml

# Take screenshot of home state
- takeScreenshot: 09-home-before-loading

# Tap on a sample quiz from Recent Topics
# This will show the quiz directly (cached questions, no loading view)
# So we verify loading view would appear for new quiz generation
- tapOn:
    text: ".*Solar System.*|.*Basic Math.*|.*Famous Scientists.*"

# Wait for quiz to load (sample quizzes load instantly from cache)
- extendedWaitUntil:
    visible: "Question.*of.*"
    timeout: 10000

- takeScreenshot: 09-quiz-started

# Complete a few questions
- tapOn:
    text: "A\\).*"
- tapOn:
    text: ".*Submit.*|.*Next.*"

- tapOn:
    text: "A\\).*"
    optional: true
- tapOn:
    text: ".*Submit.*|.*Next.*"
    optional: true

- takeScreenshot: 09-quiz-progress

# Note: Loading view with ad container is only shown for NEW quiz generation
# which requires OpenRouter API key. Sample quizzes skip the loading view.
# This test verifies the quiz flow works; ad container is tested in unit/E2E tests.
