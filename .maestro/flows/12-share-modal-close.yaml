appId: com.saberloop.app
---
# Test 12: Quiz Sharing - Close Modal
# Corresponds to E2E test: "should close Share Quiz modal when close button clicked"

# Launch and navigate to home
- launchApp
- runFlow:
    file: _shared/navigate-home.yaml

# Complete a quiz
- tapOn:
    text: ".*Solar System.*|.*Basic Math.*|.*Famous Scientists.*"

- extendedWaitUntil:
    visible: "Question.*of.*"
    timeout: 10000

- tapOn:
    text: "A\\).*"
- tapOn:
    text: ".*Submit.*|.*Next.*"

- tapOn:
    text: "A\\).*"
    optional: true
- tapOn:
    text: ".*Submit.*|.*Next.*"
    optional: true

- tapOn:
    text: "A\\).*"
    optional: true
- tapOn:
    text: ".*Submit.*|.*Next.*"
    optional: true

- tapOn:
    text: "A\\).*"
    optional: true
- tapOn:
    text: ".*Submit.*|.*Next.*"
    optional: true

- tapOn:
    text: "A\\).*"
    optional: true
- tapOn:
    text: ".*Submit.*|.*Next.*"
    optional: true

- extendedWaitUntil:
    visible: ".*Results.*|.*Score.*|.*%.*"
    timeout: 10000

# Open share modal
- tapOn:
    text: ".*Share Quiz.*"

- extendedWaitUntil:
    visible: ".*Copy.*Link.*|.*Copy.*"
    timeout: 5000

- takeScreenshot: 12-modal-open

# Close the modal
- tapOn:
    text: ".*Close.*"

# Wait for modal to close (Copy Link button should not be visible)
- extendedWaitUntil:
    notVisible: ".*Copy.*Link.*"
    timeout: 3000

- takeScreenshot: 12-modal-closed

# Verify we're back on results page
- assertVisible:
    text: ".*Results.*|.*Score.*|.*%.*"

- takeScreenshot: 12-back-on-results
