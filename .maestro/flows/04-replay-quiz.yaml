appId: com.saberloop.app
---
# Test 04: Replay Saved Quiz
# Verifies replaying a quiz from home screen Recent Topics

# Launch and navigate to home
- launchApp
- runFlow:
    file: _shared/navigate-home.yaml

# Verify Recent Topics shows at least one quiz
- assertVisible:
    text: ".*Recent.*Topics.*"

# Take screenshot of home with quizzes
- takeScreenshot: 04-home-recent-topics

# Tap on first available quiz in Recent Topics
# (could be any quiz - Solar System, Famous Scientists, etc.)
- tapOn:
    text: ".*Solar System.*|.*Famous Scientists.*|.*Basic Math.*|.*What makes.*|.*How do.*"

# Wait for quiz to load
- extendedWaitUntil:
    visible: "Question.*of.*"
    timeout: 10000

- takeScreenshot: 04-replay-started

# Answer all 5 questions quickly (just tap first option for each)
# Q1
- tapOn:
    text: "A\\).*"
- tapOn:
    text: ".*Submit.*|.*Next.*"

# Q2-Q5: Continue with first option (optional in case we reach results early)
- tapOn:
    text: "A\\).*"
    optional: true
- tapOn:
    text: ".*Submit.*|.*Next.*"
    optional: true

- tapOn:
    text: "A\\).*"
    optional: true
- tapOn:
    text: ".*Submit.*|.*Next.*"
    optional: true

- tapOn:
    text: "A\\).*"
    optional: true
- tapOn:
    text: ".*Submit.*|.*Next.*"
    optional: true

- tapOn:
    text: "A\\).*"
    optional: true
- tapOn:
    text: ".*Submit.*|.*Next.*"
    optional: true

# Wait for results page
- extendedWaitUntil:
    visible: ".*Results.*|.*Score.*|.*%.*"
    timeout: 10000

- takeScreenshot: 04-replay-results

# Verify results page shows percentage
- assertVisible:
    text: ".*%.*"

# Return to home via nav
- tapOn: "Home"

# Handle leave confirmation if it appears
- tapOn:
    text: "OK"
    optional: true

# Verify we're back on home
- extendedWaitUntil:
    visible: ".*Saberloop.*|.*Welcome back.*"
    timeout: 5000

- takeScreenshot: 04-home-after-replay
