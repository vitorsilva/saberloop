appId: com.saberloop.app
---
# Test 15: Mode Toggle Feature
# Verifies mode toggle functionality (Learning/Party modes)
# NOTE: This test requires MODE_TOGGLE feature flag to be ENABLED
# Currently DISABLED by default - enable in src/core/features.js to run this test

# Launch and navigate to home
- launchApp
- runFlow:
    file: _shared/navigate-home.yaml

# Verify mode toggle is visible on home page
- assertVisible:
    text: ".*Learn.*"
    label: "Learning mode button should be visible"

- assertVisible:
    text: ".*Party.*"
    label: "Party mode button should be visible"

- takeScreenshot: 15-mode-toggle-home-learning

# Default should be Learning mode - verify Learn button is selected
# (Learning button should have visual indicator of being active)

# Switch to Party mode
- tapOn:
    text: ".*Party.*"
    label: "Switch to Party mode"

- takeScreenshot: 15-mode-toggle-home-party

# Navigate to Settings to verify toggle persists
- tapOn: "Settings"

# Verify mode toggle is visible on Settings
- assertVisible:
    text: ".*Party.*"
    label: "Party mode should persist on Settings page"

- takeScreenshot: 15-mode-toggle-settings-party

# Switch back to Learning mode
- tapOn:
    text: ".*Learn.*"
    label: "Switch to Learning mode"

- takeScreenshot: 15-mode-toggle-settings-learning

# Navigate to History/Topics
- tapOn: "History"

# Verify mode toggle is visible on Topics
- assertVisible:
    text: ".*Learn.*"
    label: "Mode toggle should be visible on Topics page"

- takeScreenshot: 15-mode-toggle-topics

# Return to Home
- tapOn: "Home"

# Verify Learning mode persisted
- assertVisible:
    text: ".*Learn.*"
    label: "Learning mode should persist after navigation"

- takeScreenshot: 15-mode-toggle-final
