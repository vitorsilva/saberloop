# Issue #52: Add confirmation dialog when leaving quiz via bottom navigation

**Issue:** https://github.com/vitorsilva/saberloop/issues/52
**Branch:** `fix/issue-52-quiz-leave-confirmation`
**Status:** In Progress

---

## Problem Statement

When a user is in the middle of a quiz, clicking on the bottom navigation links (Home, Topics, Settings) immediately navigates away without any confirmation, causing loss of quiz progress.

## Root Cause Analysis

In `QuizView.js`:
- The back button (arrow_back) correctly uses `confirm(t('quiz.confirmLeave'))` before navigating (lines 135-139)
- However, the bottom navigation uses plain `<a href="#/...">` tags (lines 112-123) which bypass any JavaScript confirmation
- These links trigger a `hashchange` event that the router handles immediately

## Solution Design

**Approach:** Intercept clicks on bottom navigation links in QuizView and show confirmation dialog.

**Implementation:**
1. Keep the `<a>` tags for semantic correctness and accessibility
2. Add a CSS class to identify nav links that need confirmation (e.g., `nav-link`)
3. Add click event listeners to these links in `attachListeners()`
4. On click: `preventDefault()`, show `confirm()` dialog, navigate only if confirmed

**Why this approach:**
- Minimal code changes (contained to QuizView.js)
- Consistent with existing back button pattern
- Maintains link accessibility features
- Uses existing i18n key `quiz.confirmLeave`

## Files to Change

| File | Change |
|------|--------|
| `src/views/QuizView.js` | Add click handlers for nav links with confirmation |

## Testing Plan

1. **E2E Test:** Create test that verifies navigation is blocked without confirmation
2. **Manual Test:**
   - Start a quiz
   - Click Home → should show confirmation
   - Click Cancel → should stay in quiz
   - Click OK → should navigate to Home
   - Repeat for Topics and Settings

## Checklist

- [x] Create plan document
- [x] Capture "before" screenshot
- [x] Write failing E2E test
- [x] Implement fix in QuizView.js
- [x] Run tests (all pass)
- [x] Capture "after" screenshot
- [x] Commit and push
- [x] Create PR: https://github.com/vitorsilva/saberloop/pull/53

---

**Last Updated:** 2025-12-27
